<!doctype html>
<html>
    <head>
    	<title>Learning ECMAScript 6</title>
    </head>
    <body>
        <script src="https://google.github.io/traceur-compiler/bin/traceur.js"></script>
        <script src="https://google.github.io/traceur-compiler/bin/BrowserSystem.js"></script>
        <script src="https://google.github.io/traceur-compiler/src/bootstrap.js"></script>
        <script type="module">
            function displayName(json)
            {
              try
              {
                //보통 DOM을 이용해서 화면에 표시한다
                console.log(json.Name);
              }
              catch(e)
              {
                console.log("예외: " + e.message);
              }
            }

            function displayProfession(json)
            {
              try
              {
                console.log(json.Profession);
              }
              catch(e)
              {
                console.log("예외: " + e.message);
              }
            }

            function displayAge(json)
            {
              try
              {
                console.log(json.Age);
              }
              catch(e)
              {
                console.log("예외: " + e.message);
              }
            }

            function displayData(data)
            {
              try
              {
                var json = JSON.parse(data);

                displayName(json);
                displayProfession(json);
                displayAge(json);
              }
              catch(e)
              {
                console.log("예외: " + e.message);
              }
            }

            var request = new XMLHttpRequest();
            var url = "data.json";

            request.open("GET", url);
            request.addEventListener("load", function(){
                if(request.status === 200) 
                {
                  displayData(request.responseText);
                }
                else
                {
                  console.log("서버 에러: " + request.status);
                }            
            }, false);

            request.addEventListener("error", function(){
              console.log("AJAX 요청 실패");
            }, false);

            request.send();
        </script>
    </body>
</html>
